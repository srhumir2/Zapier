---
title: "Applying for the data science position"
author: "Reza"
date: "March 16, 2016"
output: pdf_document
---
Dear 

I am writing to express my interest in working with zapier as data scientist. I am doing the last steps of my doctorate in mathematics. I have been doing research and teaching in the my field of study from the time I was doing my master. Alongside I did cooperate with experts in other fields including economists and urban planners.

To name some, I developed an algorithm for assessing accessibility in cities using big graphs and programmed it in MatLab. I am familiar with by nature statistical techniques of remote sensing as well, and help urban planners running them. With economists, we studied financial derivatives with aim of understanding their nature and their relationship with gambling. Also I designed a data bank for their scientific papers.

I would like to enter the business sector and found the data analysis really interesting and perfectly fitted to my theoretical background. I am a good independent fast leaner. During the last couple of months I learned SQL and R programming and using it in data analysis. Plus I already am familiar with Python and would like to learn it more deeply. 

You can find some works of mine in my [github account](github.com/srhumir)

In R I love the "dplyr"" and "data.table" packages for their fast and efficient capability of cleaning and summarizing the data. "raster" is a very nice package for working with grid ?data?. For plotting one should not underestimate the base plotting system of R but whenever it is too much coding needed using it, I prefer to use "ggplot2". Rmarkdown in combination with LaTex is a great tool for making reports. In machine learning techniques, neural network is really good however sometimes I found it is too slow. Random forest worked quite good. 

###Explanation of a work
MODIS is a satellite which provide mainly two kind of products. First land surface temperature (LST) and second Normalized Difference Vegetation Index (NDVI), an index between -1 and 1  of which higher values indicate indicate more dense vegetation. This data are provided in weekly intervals. Its problem is that it is really coerce, with resolution of 960m for LST. On the other hand we had an image of the SPOT satellite of 1.5m resolution which unfortunately does not provide LST information but fortunately provides enough data for computing NDVI. It is known that NDVI and LST have an inverse relationship. We use this fact to compute LST for SPOT.

Briefly I computed two linear models. One to convert NDVI of SPOT to NDVI of MODIS and another to convert NDVI to LST. The first one is quite straightforward. But the second model had to be based on not all pixels but just the so called hot edge pixels. i.e. pixels which are among the hottest 5 percent when NDVI is binned in 0.3 unit intervals. Scatter plot below shows NDVI vs LST. Red dots are hot edges and green dots indicates the fitted linear model. 

 ```{r cache = T, echo = F, message = F}
 #compute the degree two polynimial on hot edge of LST 
#converting NDVI to LST. We also draw plot to check
#if the hot edge pixels and ploynomial are acceptable
polynomail <- function(NDVIMODIS, LSTMODIS){
       ### Get hot edge pixels
       ####Bin NDVI from 0.1 to 1 by 0.05 intervals
       NDVIMODIS <- crop(NDVIMODIS, LSTMODIS)
       LSTMODIS <- crop(LSTMODIS, NDVIMODIS)
       index <- complete.cases(getValues(NDVIMODIS),getValues(LSTMODIS))
       HotEdgepixels <- data.table(NDVI = getValues(NDVIMODIS)[index], LST = getValues(LSTMODIS)[index])
       NDVILST <- HotEdgepixels
       HotEdgepixels[,bin:= floor((NDVI+1)/.03)]
       qua <- with(HotEdgepixels,tapply(LST, bin, function(x)  quantile(x,probs = 0.9,na.rm = T)))
       a <- numeric()
       for (i in 1:length(HotEdgepixels$NDVI)){
              a[i] <- (HotEdgepixels$LST[i] >= qua[[as.character(HotEdgepixels$bin[i])]]) *
                     HotEdgepixels$NDVI[i]
       }
       HotEdgepixels[, hotedge :=  a ]
       HotEdgepixels[, hotedge:= as.logical(hotedge)]
       
       HotEdgepixels <- subset(HotEdgepixels, hotedge & NDVI > .2)
       #draw plot for comparison
       plot(NDVILST$NDVI, NDVILST$LST, xlab = "NDVI", ylab = "LST")
       points(HotEdgepixels$NDVI, HotEdgepixels$LST, pch = 16, col = "red")
       ####Fit polynomial to hot edge
       x <- HotEdgepixels$NDVI
       y <- HotEdgepixels$LST
       #pol <- lm(y ~ x + I(x^2))
       pol <- lm(y ~ x)
       #draw a plot to check
       v <- seq(-1,1, by = 0.05)
       w <- pol$coefficients[1] + pol$coefficients[2] * v #+
       #       pol$coefficients[3]* v^2 
       points(v,w, pch = 15, col = "green")
       pol
}
##1. Input data
#x <- matrix(rnorm(400), 20)
#y<- matrix(rnorm(400), 20)

library(raster)
library(data.table)
#print("chosse NDVI of MODIS of resolution equal to LST")
NDVIMODIS <- raster(file.choose())
#print("choose LST of MODIS")
LSTMODIS <- raster(file.choose())

pol <- polynomail(NDVIMODIS, LSTMODIS)

 ```

To refine the results, I used the fact that the temperature of a point is dependent to its surrounding points. To take into account this fact, I computed the residuals of the model above with respect to all pixels. Then trained a neural network with with NDVI of each pixel and its eight suroonding pixels as input and the pixels residual as output.




As I agree that my resume might not be yet convincing for you to give me a full job, I would like to propose a two-month unpaid remote trainee program. I would do the jobs you expect from a data analyst. I am sure I can rapidly learn whatever needed for the job and I haven't learned yet. After two month I would have a job or at least a priceless experience working with your company.

Enclosed please find my resume. I am looking forward to hearing from you and ready to start from April.


With highest regards

Reza Hosseini
